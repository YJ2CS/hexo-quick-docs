---
title: 安装与配置
url: 安装与配置
author: YJ2CS
avatar: '/custom/avatar.webp'
authorLink: YJ2CS.github.io
authorAbout: 愿青年摆脱了冷气，只是向前走！
authorDesc: 愿青年摆脱了冷气，只是向前走！
comments: true
categories:
  - 文章
tags:
  - 悦读
no-photos: 'https://random.52ecy.cn/randbg.php?size=1&rid-安装与配置'
date: 2020-12-28 20:38:44
---

首先您需要安装nvm，这一步在Linux上十分简便，

而在Windows上推荐使用[coreybutler/nvm-windows](https://github.com/coreybutler/nvm-windows)
## nvm切换到nodejs 12.19.0
```shell
nvm ls
nvm uninstall 12.19.0
nvm install 12.19.0
nvm use 12.19.0
```

## 安装 nrm

```cmd
npm i -g nrm
```

## nrm查看下载镜像源

```cmd
nrm ls
```

## nrm切换镜像源

```cmd
nrm use taobao
```

## 安装 npm-check

```cmd
npm i -g npm-check
```

## npm 安装所有依赖

```cmd
npm i
```

## hexo初始化server

```cmd
hexo clean && hexo s -debug
```

成功启动 <http://localhost:5000> ，打开且无报错

这条报错可以忽略，其他报错则需要自行排除bug

```cmd
(node:11248) [DEP0066] DeprecationWarning: OutgoingMessage.prototype._headers is deprecated
```
## 初始化server失败的一个自我排除问题方法
*使用 npm-check 更新项目依赖*

在项目根目录(本README所在目录)运行

```cmd
npm-check -u
```


输出如下：

```cmd
? Choose which packages to update. (Press <space> to select)

 Update package.json to match version installed.
❯◯ chalk     ^1.1.3   ❯  2.4.2   https://github.com/chalk/chalk#readme
 ◯ cheerio   ^0.22.0  ❯  0.22.0  https://github.com/cheeriojs/cheerio#readme
 ◯ debug     ^2.3.3   ❯  4.1.1   https://github.com/visionmedia/debug#readme
 Space to select. Enter to start upgrading. Control-C to cancel.

```

**使用 `↑` `↓` `空格space` 选中要更新的包，`Ctrl + C` 取消更新，`回车` 就是执行更新。**

至此，您已经初步安装配置成功了，庆贺吧！！

下面列出您会经常使用到的命令

## hexo常用命令
*排除大部分bug时使用的命令:* 清理全部生成文件，重新初始化hexo,进入hexo的server

```cmd
hexo clean && hexo s -debug
```

*hexo clean* 解决一些报错,之后 *hexo g -d* 生成网页并且部署(部署到GitHub Pages)

```cmd
hexo clean && hexo g -d
```

最常用:（当您完成今天的写作时）直接生成网页并且部署(常部署到GitHub Pages)

```cmd
hexo g -d
```

本地启动hexo server进行生成网页的调试

```cmd
hexo s -debug
```

# 项目配置

## 更改默认server端口(必改)
*更换hexo的默认端口*

hexo的默认server端口是4000，其与中国大部分软件使用的端口都冲突(主要是腾讯系，包括foxmail)

所以建议更改默认的server端口,我已经帮您改好了，具体的方法如下：

### 可以每次启动server都使用指定命令

```cmd
hexo s -p 5000 -debug
```

### 永久方法(推荐)
**已经改好**
在根目录_config.yml文件中加入下列配置：(推荐在最后一行)

```yaml
server:
  port: 5000
  compress: true
  header: true
```

## hexo-git-backup插件(已选)

```cmd
npm install hexo-git-backup
```
**已经选择这项功能，您只需要启动**

启动命令
```shell
hexo b
or
hexo backup
```

## hexo-admin后台管理插件(可选)

```cmd
npm install --save hexo-admin
```

在本地的server中，浏览器的地址栏添加`/admin`

例如，
```text
http://localhost:5000/admin
```


### 用户重置admin登录密码
如果您第一次使用这项功能或者忘记了登录密码，您需要重置登录密码

在根目录中的_config.yml，删除以下内容:

![](_imgs/9c0a6a7c.png)

只需删除:

```cmd
username:*********
password_hash:**********
secret:***********
```
### hexo-admin后台管理插件doc

[使用 hexo-admin 後台管理工具](https://ed521.github.io/2019/08/hexo-admin/)

[Hexo-Admin博客后端管理工具](https://thistgg.github.io/2017/03/23/Hexo-Admin%E5%8D%9A%E5%AE%A2%E5%90%8E%E7%AB%AF%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/)

## 一键发布 deploy(已选)

新建`hexo-publish.bat`,内容为

```cmd
hexo g -d
```
**已经选择这项功能，您只需要启动**

在本地服务器(`server`)管理后台(`hexo-admin`后台)直接点击部署按钮(`deploy`)

在实际操作过程中,其实只是执行了`hexo g -d`命令


# 可选功能

## 添加feed支持(可选)
在 Hexo **根目录**下的 `_config.yml` 文件中，新增以下的配置项：

```yaml
feed:
  type: atom
  path: atom.xml
  limit: 20
  hub:
  content:
  content_limit: 140
  content_limit_delim: ' '
  order_by: -date
```

执行 `hexo clean && hexo g` 重新生成博客文件，然后在 `public` 文件夹中即可看到 `atom.xml` 文件，说明你已经安装成功了。


## 使用 Markdown-Toolbox工具管理您的文档(可选)
有问题不要发issue，因为这项功能在Windows上十分不稳定

安装python依赖
```shell
pip install -r requirements.txt
```

启动命令:

```cmd
MarkdownToolbox
或
Markdown-Toolbox
```

启动失败修复命令：

```cmd
pip install Markdown-Toolbox --force-reinstall
```

## 修改permalink，可修改为短链接(可选,不建议)

安装插件：

```cmd
npm install hexo-abbrlink --save
```

在根目录_config.yml中修改permalink,我已经改好了，请自行搜索

```yaml
permalink: :abbrlink.html #:year/:month/:day/:title/
permalink_defaults:
#alg: crc32  # 算法：crc16(default) and crc32
#rep: hex    # 进制：dec(default) and hex
#短链接
abbrlink:
  alg: crc16   #算法： crc16(default) and crc32
  rep: hex   #进制： dec(default) and hex: dec #输出进制：十进制和十六进制，默认为10进制。丨dec为十进制，hex为十六进制

```
